# –í–∏–¥–µ–æ –£–Ω–∏–∫–∞–ª–∏–∑–∞—Ç–æ—Ä ‚Äî –≤–µ–±

–í–µ–±-—Å–µ—Ä–≤–∏—Å –¥–ª—è –º–∞—Å—Å–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤, —Ç–µ–∫—Å—Ç–∞ –∏ –±–µ–π–¥–∂–µ–π. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç FFmpeg –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π NVENC.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ú–∞—Å—Å–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –≤–∏–¥–µ–æ –≤ –ø–∞–ø–∫–µ (MP4, MOV, MKV, WEBM)
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–æ–ø–∏–∏**: –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ 50 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–æ–ø–∏–π –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–µ–æ
- **–§–æ—Ä–º–∞—Ç—ã –≤—ã–≤–æ–¥–∞**: 1:1 (720x720), 9:16 (720x1280), 16:9 (1280x720)
- **–≠—Ñ—Ñ–µ–∫—Ç—ã —É–Ω–∏–∫–∞–ª–∏–∑–∞—Ü–∏–∏**: –ú–∏–∫—Ä–æ—Å—Ä–µ–∑—ã, –∫–æ–Ω—Ç—Ä–∞—Å—Ç, –æ—Ç—Ç–µ–Ω–∫–∏, —à—É–º, —è—Ä–∫–æ—Å—Ç—å, –æ–±—Ä–µ–∑–∫–∞
- **–ê–Ω–∏–º–∞—Ü–∏—è**: –î–≤–∏–∂—É—â–∏–π—Å—è —Ç–µ–∫—Å—Ç, –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ –∏—Å–∫–∞–∂–µ–Ω–∏—è, –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–æ–¥—É–ª—è—Ü–∏—è
- **–¢–µ–∫—Å—Ç –∏ –±–µ–π–¥–∂–∏**: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —à—Ä–∏—Ñ—Ç—ã, –ø–æ–∑–∏—Ü–∏–∏, —Ä–∞–∑–º–µ—Ä—ã
- **–ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ**: –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ NVENC
- **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ**: –†–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ
- **–ü—Ä–æ–≥—Ä–µ—Å—Å**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ–±—â–µ–≥–æ –∏ —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- **REST API**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–¥–∞—á —á–µ—Ä–µ–∑ API, –ø–æ–¥—Å—á–µ—Ç –≤–∏–¥–µ–æ

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- FFmpeg (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤ PATH)
- Django 4.0+
- djangorestframework

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ FFmpeg –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ PATH
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

## –ó–∞–ø—É—Å–∫

### –í–µ–±-—Å–µ—Ä–≤–µ—Ä (Django)


–°–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É 

## API

–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∑–∞–¥–∞—á –∏ –ø–æ–¥—Å—á–µ—Ç–∞ –≤–∏–¥–µ–æ.

### –ë–∞–∑–æ–≤—ã–π URL
```

```

### Endpoints

#### 1. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
**GET** `/api/jobs/`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 50 –∑–∞–¥–∞—á —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É).

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "id": "my_job_1",
    "name": "–ó–∞–¥–∞—á–∞ #1",
    "status": "running",
    "progress_overall": 45,
    "total_tasks": 10,
    "done_tasks": 4,
    "src_files_total": 5,
    "input_folder": "C:/videos/input",
    "output_folder": "C:/videos/output",
    "created_at": "2025-01-15T12:00:00Z",
    "log_path": "jobs/my_job_1/job.log",
    "message": ""
  }
]
```

**–°—Ç–∞—Ç—É—Å—ã:**
- `queued` ‚Äî –∑–∞–¥–∞—á–∞ –≤ –æ—á–µ—Ä–µ–¥–∏
- `running` ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- `done` ‚Äî –∑–∞–≤–µ—Ä—à–µ–Ω–∞
- `error` ‚Äî –æ—à–∏–±–∫–∞

#### 2. –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏
**GET** `/api/jobs/<job_id>/`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–¥–∞—á–µ –ø–æ –µ—ë ID.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `job_id` (string) ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–¥–∞—á–∏

**–ü—Ä–∏–º–µ—Ä:**
```
GET /api/jobs/my_job_1/
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": "my_job_1",
  "name": "–ó–∞–¥–∞—á–∞ #1",
  "status": "running",
  "progress_overall": 45,
  "total_tasks": 10,
  "done_tasks": 4,
  "src_files_total": 5,
  "input_folder": "C:/videos/input",
  "output_folder": "C:/videos/output",
  "params": {
    "fmt": "9:16",
    "copies": 2,
    "text_enabled": true,
    ...
  },
  "created_at": "2025-01-15T12:00:00Z",
  "log_path": "jobs/my_job_1/job.log",
  "message": ""
}
```

#### 3. –ü–æ–¥—Å—á–µ—Ç –≤–∏–¥–µ–æ –≤ –ø–∞–ø–∫–µ
**GET** `/api/count_videos?input=<path>`

–ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ—Ñ–∞–π–ª–æ–≤ (MP4, MOV, MKV, WEBM) –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –ø–∞–ø–∫–µ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `input` (string, query) ‚Äî –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ

**–ü—Ä–∏–º–µ—Ä:**
```
GET /api/count_videos?input=C:/videos/input
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "count": 15
}
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (`POST /`). –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º—É –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ.

**–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
- `GET /` ‚Äî —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ –∏ —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
- `POST /` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ (form-data)
- `GET /jobs/<job_id>/` ‚Äî –¥–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏



## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã

#### `ProcessorWorker(QObject)`
–§–æ–Ω–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–¥–∞—á. –í—ã–ø–æ–ª–Ω—è–µ—Ç FFmpeg –∫–æ–º–∞–Ω–¥—ã –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ.

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `__init__(tasks)` ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å —Å–ø–∏—Å–∫–æ–º –∑–∞–¥–∞—á
- `run()` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏
- `request_stop()` ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏
- `_nvenc_to_x264(cmd)` ‚Äî fallback —Å NVENC –Ω–∞ x264

**–°–∏–≥–Ω–∞–ª—ã:**
- `log_message(str)` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ª–æ–≥
- `status_changed(str)` ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- `overall_progress(int)` ‚Äî –æ–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å
- `current_progress(int)` ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å —Ç–µ–∫—É—â–µ–≥–æ —Ñ–∞–π–ª–∞
- `task_changed(str)` ‚Äî —Å–º–µ–Ω–∞ –∑–∞–¥–∞—á–∏
- `finished()` ‚Äî –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏

#### `VideoProcessor(QWidget)`
–ì–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å UI –∏ –ª–æ–≥–∏–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `__init__()` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ UI –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- `start_processing()` ‚Äî –∑–∞–ø—É—Å–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- `stop_processing()` ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- `build_ffmpeg_command()` ‚Äî –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ FFmpeg –∫–æ–º–∞–Ω–¥—ã
- `calc_position()` ‚Äî —Ä–∞—Å—á–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞/–±–µ–π–¥–∂–∞
- `random_metadata()` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –ø–æ —à–∞–≥–∞–º

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- –°–æ–∑–¥–∞–Ω–∏–µ UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ NVENC
- –í–∞–ª–∏–¥–∞—Ü–∏—è NVENC —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞–ø–æ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (`./input`, `./output`)

### 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∑–∞–¥–∞—á
- –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –≤–∏–¥–µ–æ—Ñ–∞–π–ª–æ–≤
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ `ffprobe`
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–ø–∏–∏
- –†–∞—Å—á–µ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–¥–∞—á

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ
- –ó–∞–ø—É—Å–∫ `ProcessorWorker` –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
- –î–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏:
  - –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ FFmpeg –∫–æ–º–∞–Ω–¥—ã
  - –ó–∞–ø—É—Å–∫ FFmpeg —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ fallback –Ω–∞ x264
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

### 4. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ FFmpeg –∫–æ–º–∞–Ω–¥—ã

#### –ë–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –í—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª: `-i input.mp4`
- –ü–æ—Ç–æ–∫–∏: `-threads N` (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —è–¥–µ—Ä CPU)
- –í—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª: `output_v1.mp4`

#### –í–∏–¥–µ–æ —Ñ–∏–ª—å—Ç—Ä—ã (–≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è)
1. **–û–±—Ä–µ–∑–∫–∞**: `trim=start=X,setpts=PTS-STARTPTS`
2. **–ö–æ–Ω—Ç—Ä–∞—Å—Ç**: `eq=contrast=X`
3. **–û—Ç—Ç–µ–Ω–æ–∫**: `hue=h=X`
4. **–®—É–º**: `noise=alls=X:allf=t`
5. **–Ø—Ä–∫–æ—Å—Ç—å/–Ω–∞—Å—ã—â–µ–Ω–Ω–æ—Å—Ç—å**: `eq=brightness=X:saturation=Y`
6. **–û–±—Ä–µ–∑–∫–∞ –∫—Ä–∞–µ–≤**: `crop=iw*X:ih*Y:offset_x:offset_y`
7. **–ì–µ–æ–º–µ—Ç—Ä–∏—è**: `rotate=X*sin(2*PI*t)` + `scale=iw*(1+Y*sin(2*PI*t*0.3)):ih*(1+Y*sin(2*PI*t*0.3))`
8. **–û–≤–µ—Ä–ª–µ–∏**: `gblur=sigma=X` + `vignette=PI/6:Y`
9. **–í—Ä–µ–º–µ–Ω–Ω–∞—è –º–æ–¥—É–ª—è—Ü–∏—è**: `setpts=(1.0+X)*PTS`
10. **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**: `scale=W:H:force_original_aspect_ratio=decrease,pad=W:H:(ow-iw)/2:(oh-ih)/2:black,setsar=1`
11. **–¢–µ–∫—Å—Ç**: `drawtext=text='TEXT':fontfile='FONT':fontsize=SIZE:fontcolor=COLOR:x=X:y=Y:bordercolor=black:borderw=3:shadowcolor=black@0.5:shadowx=2:shadowy=2`
12. **–°–∫—Ä—ã—Ç–∞—è —Å–µ—Ç–∫–∞**: `drawgrid=width=64:height=64:thickness=1:color=white@0.03`

#### –ê—É–¥–∏–æ —Ñ–∏–ª—å—Ç—Ä—ã
- –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–æ–¥—É–ª—è—Ü–∏—è: `atempo=X` (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å –≤–∏–¥–µ–æ)

#### –ë–µ–π–¥–∂ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)
- –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ: `[1:v]fps=30,scale=W:-1:flags=bilinear`
- Colorkey –¥–ª—è PNG/GIF: `colorkey=0xFFFFFF:0.1:0.1`
- –§–æ—Ä–º–∞—Ç: `format=rgba[logo]`
- –ù–∞–ª–æ–∂–µ–Ω–∏–µ: `[bg][logo]overlay=X:Y:shortest=1:eof_action=pass`

#### –ö–æ–¥–µ–∫
- **NVENC** (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω): `-c:v h264_nvenc -preset p3 -cq 23 -g 48 -pix_fmt yuv420p`
- **x264** (fallback): `-c:v libx264 -crf 22 -g 48 -preset veryfast -pix_fmt yuv420p`

#### –ê—É–¥–∏–æ –∫–æ–¥–µ–∫
- `-c:a aac -b:a 128k`

#### –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- –°–ª—É—á–∞–π–Ω—ã–µ: title, encoder, artist, comment, make, model, creation_time, genre, description, year, software, copyright
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ: publisher, album, track, duration

### 5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- –ü–∞—Ä—Å–∏–Ω–≥ –≤—ã–≤–æ–¥–∞ FFmpeg —Å `-progress -`
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ `out_time_ms`, `out_time_us`, `out_time`, `progress`
- –†–∞—Å—á–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### 6. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback NVENC ‚Üí x264
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

### –ü—Ä–æ—Ñ–∏–ª–∏ —É–Ω–∏–∫–∞–ª–∏–∑–∞—Ü–∏–∏
- **–ú—è–≥–∫–∞—è**: –ë–∞–∑–æ–≤—ã–µ –∞–º–ø–ª–∏—Ç—É–¥—ã —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- **–°–∏–ª—å–Ω–∞—è**: –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ –∞–º–ø–ª–∏—Ç—É–¥—ã (√ó1.4-1.6)

### –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–∂–∏–º
- –û—Ç–∫–ª—é—á–∞–µ—Ç –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (–æ–±—Ä–µ–∑–∫–∞, –æ—Ç—Ç–µ–Ω–∫–∏, —à—É–º, –≥–µ–æ–º–µ—Ç—Ä–∏—è, –æ–≤–µ—Ä–ª–µ–∏, –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–æ–¥—É–ª—è—Ü–∏—è)
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–¢–µ–∫—Å—Ç**: 9 –ø–æ–∑–∏—Ü–∏–π + –∞–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è
- **–ë–µ–π–¥–∂**: 9 –ø–æ–∑–∏—Ü–∏–π + —Å–ª—É—á–∞–π–Ω—ã–π –º–∞—Å—à—Ç–∞–±
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç** —Ä–∞–∑–º–µ—Ä–æ–≤ –ø–æ–¥ –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
video_service/
‚îú‚îÄ‚îÄ manage.py          # Django management script
‚îú‚îÄ‚îÄ api/               # API –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ forms.py       # –§–æ—Ä–º—ã –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ views.py       # Views –∏ API endpoints
‚îÇ   ‚îú‚îÄ‚îÄ serializers.py # DRF serializers
‚îÇ   ‚îú‚îÄ‚îÄ tasks.py       # –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á
‚îÇ   ‚îú‚îÄ‚îÄ store.py       # –•—Ä–∞–Ω–∏–ª–∏—â–µ –∑–∞–¥–∞—á (—Ñ–∞–π–ª–æ–≤–æ–µ)
‚îÇ   ‚îî‚îÄ‚îÄ urls.py        # URL routing
‚îú‚îÄ‚îÄ video_core/        # –Ø–¥—Ä–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ
‚îÇ   ‚îú‚îÄ‚îÄ ffmpeg_builder.py  # –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ FFmpeg –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ ffmpeg_runner.py   # –ó–∞–ø—É—Å–∫ FFmpeg —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ params.py           # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–¥–∞—á
‚îÇ   ‚îú‚îÄ‚îÄ positions.py       # –†–∞—Å—á–µ—Ç –ø–æ–∑–∏—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ probe.py           # –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–∏–¥–µ–æ
‚îÇ   ‚îî‚îÄ‚îÄ metadata.py        # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ videosvc/          # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Django
‚îÇ   ‚îú‚îÄ‚îÄ settings.py
‚îÇ   ‚îî‚îÄ‚îÄ urls.py
‚îú‚îÄ‚îÄ templates/         # HTML —à–∞–±–ª–æ–Ω—ã
‚îú‚îÄ‚îÄ media/             # –•—Ä–∞–Ω–∏–ª–∏—â–µ –∑–∞–¥–∞—á –∏ –ª–æ–≥–æ–≤
‚îú‚îÄ‚îÄ requirements.txt   # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ README.md          # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Python
- `sys` ‚Äî –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `os` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —è–¥–µ—Ä CPU
- `subprocess` ‚Äî –≤—ã–∑–æ–≤ FFmpeg/ffprobe
- `random` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- `datetime` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏ –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- `pathlib` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–æ–≤—ã–º–∏ –ø—É—Ç—è–º–∏
- `threading` ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á
- `json` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –∑–∞–¥–∞—á

### Django –∏ Django REST Framework
- `Django` ‚Äî –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- `djangorestframework` ‚Äî REST API
- `Django Forms` ‚Äî —Ñ–æ—Ä–º—ã –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### –í–Ω–µ—à–Ω–∏–µ —É—Ç–∏–ª–∏—Ç—ã
- **FFmpeg** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ/–∞—É–¥–∏–æ
- **ffprobe** ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞—Ö

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
1. –í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–ø–∫—É —Å –∏—Å—Ö–æ–¥–Ω—ã–º–∏ –≤–∏–¥–µ–æ
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–ø–∫—É –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—Ç–µ–∫—Å—Ç, –±–µ–π–¥–∂, —ç—Ñ—Ñ–µ–∫—Ç—ã)
4. –ù–∞–∂–º–∏—Ç–µ "–°—Ç–∞—Ä—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏"

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **–¢–µ–∫—Å—Ç**: –í—ã–±–µ—Ä–∏—Ç–µ —à—Ä–∏—Ñ—Ç, —Ä–∞–∑–º–µ—Ä, –ø–æ–∑–∏—Ü–∏—é, –≤–∫–ª—é—á–∏—Ç–µ –∞–Ω–∏–º–∞—Ü–∏—é
- **–ë–µ–π–¥–∂**: –ó–∞–≥—Ä—É–∑–∏—Ç–µ PNG/GIF/MP4, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –º–∞—Å—à—Ç–∞–± –∏ –ø–æ–∑–∏—Ü–∏—é
- **–≠—Ñ—Ñ–µ–∫—Ç—ã**: –í–∫–ª—é—á–∏—Ç–µ –Ω—É–∂–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã, –≤—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å
- **–ö–æ–ø–∏–∏**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–æ–ø–∏–π –Ω–∞ —Ñ–∞–π–ª

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### FFmpeg –Ω–µ –Ω–∞–π–¥–µ–Ω
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ FFmpeg —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤ PATH
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: `ffmpeg -version` –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ

### NVENC
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ FFmpeg —Å–æ–±—Ä–∞–Ω —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π NVENC
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ x264

### –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –í–∫–ª—é—á–∏—Ç–µ "–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–∂–∏–º" –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **NVENC**: ~3-5x –±—ã—Å—Ç—Ä–µ–µ CPU –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- **x264 veryfast**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
- **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ —è–¥—Ä–∞ CPU
- **–ü–∞–º—è—Ç—å**: –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –±–ª–∞–≥–æ–¥–∞—Ä—è –ø–æ—Ç–æ–∫–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ

## –û–° –∏ –∑–∞–ø—É—Å–∫

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **Windows** –∏ **Linux** (Ubuntu, Debian –∏ –¥—Ä.)

### –î–ª—è Ubuntu

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.8+ (`sudo apt install python3 python3-venv python3-pip`)
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ FFmpeg c –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π NVENC:
   - NVIDIA: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥—Ä–∞–π–≤–µ—Ä—ã (`sudo apt install nvidia-driver-535 nvidia-utils`)
   - FFmpeg: `sudo apt install ffmpeg`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫—É nvenc: `ffmpeg -encoders | grep nvenc` (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∏ h264_nvenc, hevc_nvenc)
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install -r requirements.txt
   ```
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç –¥–ª—è drawtext —Ä–µ–∞–ª—å–Ω–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, `/usr/share/fonts/truetype/dejavu/DejaVuSans.ttf` –∏–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ —Ç—Ä–µ–±—É–µ–º—ã–π ttf/otf.
5. –ó–∞–ø—É—Å–∫:
   ```bash
   python manage.py runserver 0.0.0.0:8000
   ```

- –ò—Å—Ö–æ–¥–Ω—ã–µ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏—Ä—É—é—â–∏–µ –≤–∏–¥–µ–æ, –∞ —Ç–∞–∫–∂–µ –ª–æ–≥–∏, –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –ø–∞–ø–∫–µ `media/jobs/`.
- –†–µ–∂–∏–º—ã –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã–±–∏—Ä–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ï—Å–ª–∏ NVENC –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω ‚Äî –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è CPU (x264).
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å API –∏ web –æ–¥–∏–Ω–∞–∫–æ–≤—ã –≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –û–°.

### –î–ª—è Windows

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.8+ 
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ FFmpeg:
   - –î–æ–±–∞–≤—å—Ç–µ –≤ PATH
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: `ffmpeg -version` –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install -r requirements.txt
   ```
4. –ó–∞–ø—É—Å–∫:
   ```bash
   python manage.py runserver 0.0.0.0:8000
   ```

–°–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É 

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –¢—Ä–µ–±—É–µ—Ç FFmpeg (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤ PATH)
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Windows –∏ Linux (Ubuntu/Debian). –î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –≤–∏–¥–µ–æ–æ–±—Ä–∞–±–æ—Ç–∫–∏ NVENC –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–π –≤–∏–¥–µ–æ–∫–∞—Ä—Ç—ã –∏ –¥—Ä–∞–π–≤–µ—Ä–æ–≤ NVIDIA
- –ú–∞–∫—Å–∏–º—É–º 50 –∫–æ–ø–∏–π –Ω–∞ —Ñ–∞–π–ª (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ UI)

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (Docker, Ubuntu)

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ Ubuntu/Linux. –í—Å–µ –ø—É—Ç–∏ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã –¥–ª—è –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

- –û–±—Ä–∞–∑ –≤ Docker Hub: `yourname/videosvc:latest` (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à)
- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞–ø–∫–∏ (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ ‚Üí –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞):
  - `/opt/video_service_data/input` ‚Üí `/data/input` (–∏—Å—Ö–æ–¥–Ω–∏–∫–∏)
  - `/opt/video_service_data/output` ‚Üí `/data/output` (—Ä–µ–∑—É–ª—å—Ç–∞—Ç)
  - `/opt/video_service/media` ‚Üí `/app/media` (–ª–æ–≥–∏/–∑–∞–¥–∞—á–∏)

üìñ **–ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏**: –°–º. —Ñ–∞–π–ª `DEPLOYMENT.md`

–®–∞–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# 1) –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
sudo mkdir -p /opt/video_service
sudo mkdir -p /opt/video_service_data/{input,output}
sudo mkdir -p /opt/video_service/media

# 2) .env (—Å–µ–∫—Ä–µ—Ç—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
sudo tee /opt/video_service/.env >/dev/null <<'EOF'
DJANGO_SECRET_KEY=<<–°–ï–ö–†–ï–¢_–ë–ï–ó_–°–ö–û–ë–û–ö>>
DJANGO_DEBUG=False
DJANGO_ALLOWED_HOSTS=77.239.108.88,localhost,127.0.0.1
TZ=Europe/Moscow
EOF

# 3) docker-compose.prod.yml (–∑–∞–º–µ–Ω–∏—Ç–µ yourname –Ω–∞ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)
sudo tee /opt/video_service/docker-compose.prod.yml >/dev/null <<'YAML'
services:
  videosvc:
    image: yourname/videosvc:latest
    restart: unless-stopped
    ports:
      - "8000:8000"
    env_file: .env
    command: ["python","-m","gunicorn","-w","3","-b","0.0.0.0:8000","videosvc.wsgi:application"]
    volumes:
      - /opt/video_service_data/input:/data/input:ro
      - /opt/video_service_data/output:/data/output
      - /opt/video_service/media:/app/media
YAML

# 4) –ó–∞–ø—É—Å–∫
cd /opt/video_service
docker compose -f docker-compose.prod.yml pull
docker compose -f docker-compose.prod.yml up -d
```

–î–æ—Å—Ç—É–ø: `http://77.239.108.88:8000`

- –í —Ñ–æ—Ä–º–µ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ:
  - `input_folder`: `/data/input`
  - `output_folder`: `/data/output`
  - `badge_path` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): `/data/pag/logo.png`

### –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –≤—ã–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ (—Å–µ—Ä–≤–µ—Ä)

- –ö—É–¥–∞ –∫–ª–∞—Å—Ç—å –∏—Å—Ö–æ–¥–Ω–∏–∫–∏: `/opt/video_service_data/input`
- –û—Ç–∫—É–¥–∞ –∑–∞–±–∏—Ä–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `/opt/video_service_data/output`

–ò–∑ Windows (PowerShell, OpenSSH):
```powershell
# –æ–¥–∏–Ω —Ñ–∞–π–ª
scp "C:\\Path\\to\\video.mp4" root@77.239.108.88:/opt/video_service_data/input/
# –ø–∞–ø–∫–∞
scp -r "C:\\Path\\to\\videos\\*" root@77.239.108.88:/opt/video_service_data/input/
```

–ò–∑ Linux/macOS:
```bash
scp /path/video.mp4 root@77.239.108.88:/opt/video_service_data/input/
scp -r /path/videos/* root@77.239.108.88:/opt/video_service_data/input/
```

–ó–∞–±—Ä–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (Windows):
```powershell
scp -r root@77.239.108.88:/opt/video_service_data/output/* "C:\\Users\\Aorus\\Downloads\\rendered\\"
```

–ó–∞–±—Ä–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (Linux/macOS):
```bash
scp -r root@77.239.108.88:/opt/video_service_data/output/* ~/Downloads/rendered/
```

–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
ls -la /opt/video_service_data/input | head
ls -la /opt/video_service_data/output | head
# –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker compose -f /opt/video_service/docker-compose.prod.yml exec videosvc ls -la /data/input | head
```

### –õ–æ–≥–∏ –∑–∞–¥–∞—á

- –§–∞–π–ª—ã –ª–æ–≥–æ–≤: `/opt/video_service/media/jobs/<job_id>/job.log`

```bash
# –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
tail -n 50 /opt/video_service/media/jobs/<job_id>/job.log
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ (–æ–±—Ä–∞–∑ –∏–∑ Docker Hub)

```bash
cd /opt/video_service
docker compose -f docker-compose.prod.yml pull
docker compose -f docker-compose.prod.yml up -d
docker compose -f docker-compose.prod.yml ps
```

### –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –∏ —Ñ–∞–µ—Ä–≤–æ–ª

```bash
sudo systemctl enable --now docker
sudo ufw allow 8000/tcp
```
